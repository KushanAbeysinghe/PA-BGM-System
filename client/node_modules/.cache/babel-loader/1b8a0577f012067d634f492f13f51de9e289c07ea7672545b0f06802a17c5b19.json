{"ast":null,"code":"import _toConsumableArray from\"C:/Users/kusha/Desktop/Radio Alarm System - Copy/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/kusha/Desktop/Radio Alarm System - Copy/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/kusha/Desktop/Radio Alarm System - Copy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/kusha/Desktop/Radio Alarm System - Copy/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useEffect}from'react';import axios from'axios';import{useParams,Link,useNavigate}from'react-router-dom';import{differenceInHours}from'date-fns';import Footer from'./Footer';import Header from'./Header';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RadioPlayer=function RadioPlayer(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var audioRef=useRef(null);var trackRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isMuted=_useState2[0],setIsMuted=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),volume=_useState4[0],setVolume=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(navigator.onLine),_useState8=_slicedToArray(_useState7,2),isOnline=_useState8[0],setIsOnline=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),tracks=_useState10[0],setTracks=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),schedule=_useState12[0],setSchedule=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),newTrack=_useState14[0],setNewTrack=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),newTime=_useState16[0],setNewTime=_useState16[1];var _useState17=useState(new Date().toLocaleTimeString('en-GB',{hour12:false})),_useState18=_slicedToArray(_useState17,2),currentTime=_useState18[0],setCurrentTime=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),profile=_useState20[0],setProfile=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),errorMessage=_useState22[0],setErrorMessage=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),userInteracted=_useState24[0],setUserInteracted=_useState24[1];useEffect(function(){fetchRadioProfile();fetchTracks();fetchSchedule();},[]);useEffect(function(){var interval=setInterval(function(){var now=new Date().toLocaleTimeString('en-GB',{hour12:false});setCurrentTime(now);var scheduledTrack=schedule.find(function(track){return track.time===now;});if(scheduledTrack){playScheduledTrack(scheduledTrack.track);}},1000);return function(){return clearInterval(interval);};},[schedule,profile]);useEffect(function(){if(!profile)return;var audioElement=audioRef.current;if(!audioElement)return;var handleAudioError=function handleAudioError(){console.error('Stream error, attempting to reload the stream...');setErrorMessage('Stream error, attempting to reload...');};var handleOnline=function handleOnline(){console.log('Internet connection restored, refreshing the page...');setIsOnline(true);window.location.reload(true);};var handleOffline=function handleOffline(){console.log('Internet connection lost.');setIsOnline(false);setErrorMessage('No internet connection.');};audioElement.addEventListener('error',handleAudioError);window.addEventListener('online',handleOnline);window.addEventListener('offline',handleOffline);audioElement.muted=false;setIsMuted(false);return function(){audioElement.removeEventListener('error',handleAudioError);window.removeEventListener('online',handleOnline);window.removeEventListener('offline',handleOffline);};},[profile]);var fetchRadioProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/radiostreams/\".concat(id));case 3:response=_context.sent;setProfile(response.data);_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('There was an error fetching the radio profile!',_context.t0);setErrorMessage('Error fetching radio profile.');case 11:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchRadioProfile(){return _ref.apply(this,arguments);};}();var fetchTracks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/radio/\".concat(id,\"/tracks\"));case 3:response=_context2.sent;setTracks(response.data);_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error('There was an error fetching the tracks!',_context2.t0);setErrorMessage('Error fetching tracks.');case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function fetchTracks(){return _ref2.apply(this,arguments);};}();var fetchSchedule=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"/radio/\".concat(id,\"/schedule\"));case 3:response=_context3.sent;setSchedule(response.data);_context3.next=11;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.error('There was an error fetching the schedule!',_context3.t0);setErrorMessage('Error fetching schedule.');case 11:case\"end\":return _context3.stop();}},_callee3,null,[[0,7]]);}));return function fetchSchedule(){return _ref3.apply(this,arguments);};}();var handlePlay=function handlePlay(){if(!profile||profile.blocked)return;var audioElement=audioRef.current;setIsLoading(true);audioElement.src=profile.url;audioElement.load();audioElement.play().then(function(){setIsLoading(false);}).catch(function(error){console.error('Error attempting to play the stream:',error);setErrorMessage('Error attempting to play the stream.');setIsLoading(false);});};var handleUserInteraction=function handleUserInteraction(){setUserInteracted(true);handlePlay();};var handleMute=function handleMute(){if(!audioRef.current)return;audioRef.current.muted=!audioRef.current.muted;setIsMuted(!isMuted);};var handleVolumeChange=function handleVolumeChange(event){var newVolume=event.target.value;if(!audioRef.current)return;audioRef.current.volume=newVolume;setVolume(newVolume);};var playScheduledTrack=function playScheduledTrack(track){if(!profile||profile.alarmBlocked||!audioRef.current||!trackRef.current)return;fadeOut(audioRef.current,function(){trackRef.current.src=\"/uploads/tracks/\".concat(track);console.log('Track source set to:',trackRef.current.src);trackRef.current.load();trackRef.current.oncanplaythrough=function(){trackRef.current.play().catch(function(error){console.error('Error playing track:',error);});};trackRef.current.onended=function(){fadeIn(audioRef.current);audioRef.current.play();};});};var fadeOut=function fadeOut(audio,callback){var volume=1.0;var fadeAudio=setInterval(function(){if(volume>0.1){volume-=0.1;audio.volume=volume;}else{clearInterval(fadeAudio);audio.volume=0;callback();}},200);};var fadeIn=function fadeIn(audio){var volume=0;var fadeAudio=setInterval(function(){if(volume<0.9){volume+=0.1;audio.volume=volume;}else{clearInterval(fadeAudio);audio.volume=1.0;}},200);};var handleAddTrack=function handleAddTrack(){var newSchedule={track:newTrack,time:newTime};var updatedSchedule=[].concat(_toConsumableArray(schedule),[newSchedule]);setSchedule(updatedSchedule);axios.post(\"/radio/\".concat(id,\"/schedule\"),updatedSchedule).then(function(response){console.log('Schedule saved to server');}).catch(function(error){console.error('Error saving schedule to server',error);});setNewTrack('');setNewTime('');};var getDaysLeft=function getDaysLeft(expirationDate,createdDate,subscriptionPlan){var now=new Date();var created=new Date(createdDate);var expiration=new Date(expirationDate);var subscriptionDays=0;switch(subscriptionPlan){case'1 Day':subscriptionDays=1;break;case'1 Month':subscriptionDays=30;break;case'3 Months':subscriptionDays=90;break;case'6 Months':subscriptionDays=180;break;case'1 Year':subscriptionDays=365;break;default:subscriptionDays=0;}var hoursPassed=differenceInHours(now,created);var daysPassed=Math.ceil(hoursPassed/24);var daysLeft=subscriptionDays-daysPassed;console.log(\"Current Date: \".concat(now));console.log(\"Created Date: \".concat(created));console.log(\"Expiration Date: \".concat(expiration));console.log(\"Hours Passed: \".concat(hoursPassed));console.log(\"Days Passed (ceil): \".concat(daysPassed));console.log(\"Subscription Days: \".concat(subscriptionDays));console.log(\"Days Left: \".concat(daysLeft));return daysLeft;};var isNextToPlay=function isNextToPlay(scheduledTime){var now=new Date();var scheduledDate=new Date();var _scheduledTime$split$=scheduledTime.split(':').map(Number),_scheduledTime$split$2=_slicedToArray(_scheduledTime$split$,3),hours=_scheduledTime$split$2[0],minutes=_scheduledTime$split$2[1],seconds=_scheduledTime$split$2[2];scheduledDate.setHours(hours,minutes,seconds);var differenceInMinutes=(scheduledDate-now)/60000;return differenceInMinutes>=0&&differenceInMinutes<=1;};var handleLogout=function handleLogout(){localStorage.removeItem('token');localStorage.removeItem('user');navigate('/login');};if(!profile){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(profile.blocked){return/*#__PURE__*/_jsxs(\"div\",{className:\"container vh-100 d-flex flex-column align-items-center justify-content-center\",children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n          .blocked-message {\\n            color: red;\\n            font-weight: bold;\\n            font-size: 24px;\\n          }\\n        \"}),/*#__PURE__*/_jsx(\"div\",{className:\"blocked-message\",children:\"Your profile is blocked.\"}),/*#__PURE__*/_jsx(\"div\",{children:profile.companyName})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column vh-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container flex-grow-1 d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n            .radio-player {\\n              background-color: white;\\n              border-radius: 8px;\\n              padding: 20px;\\n              box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\\n              width: 450px;\\n            }\\n            .radio-player h1 {\\n              font-size: 24px;\\n              font-weight: bold;\\n            }\\n            .radio-player img {\\n              max-width: 100%;\\n              height: auto;\\n              padding: 10px;\\n              box-sizing: border-box;\\n            }\\n            .radio-player .form-control-range {\\n              width: 100%;\\n            }\\n            .radio-player .btn {\\n              width: 100%;\\n            }\\n            .radio-player .profile-info h2 {\\n              margin-top: 20px;\\n              font-size: 18px;\\n              font-weight: bold;\\n            }\\n            .radio-player .profile-info p {\\n              font-size: 16px;\\n            }\\n            .radio-player .list-group-item {\\n              margin-top: 10px;\\n              background-color: #f8f9fa;\\n              border: 1px solid #dee2e6;\\n              transition: background-color 0.3s, transform 0.3s;\\n            }\\n            .radio-player .list-group-item:hover {\\n              background-color: #e9ecef;\\n              transform: scale(1.02);\\n            }\\n            .radio-player .list-group-item.active {\\n              background-color: #007bff;\\n              color: white;\\n            }\\n            .action-buttons {\\n              position: absolute;\\n              top: 10px;\\n              right: 10px;\\n              display: flex;\\n              gap: 10px;\\n            }\\n            .header {\\n              text-align: center;\\n              margin-bottom: 20px;\\n            }\\n            .header h1 {\\n              font-size: 3rem;\\n              margin-top: 50px;\\n            }\\n            .header h2 {\\n              font-size: 1.5rem;\\n              margin: 0;\\n            }\\n            .subscription-info {\\n              text-align: center;\\n              font-size: 1rem;\\n              margin-top: 10px;\\n            }\\n            .card {\\n              width: 100%;\\n              background-color: #f8f9fa;\\n              border: 1px solid #dee2e6;\\n              box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\\n            }\\n          \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[profile.alarmBlocked?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",disabled:true,children:\"Go to Profile\"}):/*#__PURE__*/_jsx(Link,{to:\"/radio/\".concat(id,\"/profile\"),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:\"Go to Profile\"})}),/*#__PURE__*/_jsx(Link,{to:\"/localplayer/\".concat(id),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info\",children:\"Go to Local Player\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:profile.name}),/*#__PURE__*/_jsx(\"h2\",{children:profile.companyName}),/*#__PURE__*/_jsx(\"div\",{className:\"subscription-info\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Subscription Plan: \",profile.subscriptionPlan,/*#__PURE__*/_jsx(\"br\",{}),\"Days left to expire: \",getDaysLeft(profile.expirationDate,profile.createdDate,profile.subscriptionPlan)]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row flex-grow-1 align-items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"radio-player text-center\",onClick:handleUserInteraction,children:[profile.logo&&/*#__PURE__*/_jsx(\"img\",{src:\"/uploads/\".concat(profile.logo),alt:\"Company Logo\",className:\"img-fluid mb-3\"}),/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,preload:\"none\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"audio\",{ref:trackRef,preload:\"none\",style:{display:'none'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-block mb-2\",onClick:handlePlay,children:\"Live\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-block mb-2\",onClick:handleMute,children:isMuted?'Unmute':'Mute'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"range\",className:\"form-control-range\",min:\"0\",max:\"1\",step:\"0.01\",value:volume,onChange:handleVolumeChange})}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Connecting...\"}),!isOnline&&/*#__PURE__*/_jsx(\"p\",{children:\"No connection.\"}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{children:errorMessage})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 d-flex justify-content-center\",children:profile.alarmBlocked?/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Alarm System is blocked\"})}),/*#__PURE__*/_jsx(\"p\",{style:{color:'red',fontWeight:'bold'},children:\"The alarm system for this profile is currently blocked.\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Scheduled Tracks\"})}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush\",children:schedule.map(function(item,index){return/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",style:isNextToPlay(item.time)?{fontWeight:'bold',backgroundColor:'#ffecb3'}:{},children:[/*#__PURE__*/_jsx(\"span\",{className:\"dot\",style:{height:'10px',width:'10px',backgroundColor:'#ff0000',borderRadius:'50%',display:'inline-block',marginRight:'10px'}}),item.time,\" - \",item.track.split('-').slice(1).join('-')]},index);})})]})})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Footer,{})]})]});};export default RadioPlayer;","map":{"version":3,"names":["React","useRef","useState","useEffect","axios","useParams","Link","useNavigate","differenceInHours","Footer","Header","jsx","_jsx","jsxs","_jsxs","RadioPlayer","_useParams","id","navigate","audioRef","trackRef","_useState","_useState2","_slicedToArray","isMuted","setIsMuted","_useState3","_useState4","volume","setVolume","_useState5","_useState6","isLoading","setIsLoading","_useState7","navigator","onLine","_useState8","isOnline","setIsOnline","_useState9","_useState10","tracks","setTracks","_useState11","_useState12","schedule","setSchedule","_useState13","_useState14","newTrack","setNewTrack","_useState15","_useState16","newTime","setNewTime","_useState17","Date","toLocaleTimeString","hour12","_useState18","currentTime","setCurrentTime","_useState19","_useState20","profile","setProfile","_useState21","_useState22","errorMessage","setErrorMessage","_useState23","_useState24","userInteracted","setUserInteracted","fetchRadioProfile","fetchTracks","fetchSchedule","interval","setInterval","now","scheduledTrack","find","track","time","playScheduledTrack","clearInterval","audioElement","current","handleAudioError","console","error","handleOnline","log","window","location","reload","handleOffline","addEventListener","muted","removeEventListener","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","data","t0","stop","apply","arguments","_ref2","_callee2","_callee2$","_context2","_ref3","_callee3","_callee3$","_context3","handlePlay","blocked","src","url","load","play","then","catch","handleUserInteraction","handleMute","handleVolumeChange","event","newVolume","target","value","alarmBlocked","fadeOut","oncanplaythrough","onended","fadeIn","audio","callback","fadeAudio","handleAddTrack","newSchedule","updatedSchedule","_toConsumableArray","post","getDaysLeft","expirationDate","createdDate","subscriptionPlan","created","expiration","subscriptionDays","hoursPassed","daysPassed","Math","ceil","daysLeft","isNextToPlay","scheduledTime","scheduledDate","_scheduledTime$split$","split","map","Number","_scheduledTime$split$2","hours","minutes","seconds","setHours","differenceInMinutes","handleLogout","localStorage","removeItem","children","className","companyName","disabled","to","onClick","name","logo","alt","ref","preload","style","display","type","min","max","step","onChange","color","fontWeight","item","index","backgroundColor","height","width","borderRadius","marginRight","slice","join"],"sources":["C:/Users/kusha/Desktop/Radio Alarm System - Copy/client/src/components/RadioPlayer.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport { differenceInHours } from 'date-fns';\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\n\r\nconst RadioPlayer = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const audioRef = useRef(null);\r\n  const trackRef = useRef(null);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [volume, setVolume] = useState(1);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n  const [tracks, setTracks] = useState([]);\r\n  const [schedule, setSchedule] = useState([]);\r\n  const [newTrack, setNewTrack] = useState('');\r\n  const [newTime, setNewTime] = useState('');\r\n  const [currentTime, setCurrentTime] = useState(new Date().toLocaleTimeString('en-GB', { hour12: false }));\r\n  const [profile, setProfile] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [userInteracted, setUserInteracted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchRadioProfile();\r\n    fetchTracks();\r\n    fetchSchedule();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      const now = new Date().toLocaleTimeString('en-GB', { hour12: false });\r\n      setCurrentTime(now);\r\n      const scheduledTrack = schedule.find(track => track.time === now);\r\n      if (scheduledTrack) {\r\n        playScheduledTrack(scheduledTrack.track);\r\n      }\r\n    }, 1000);\r\n    return () => clearInterval(interval);\r\n  }, [schedule, profile]);\r\n\r\n  useEffect(() => {\r\n    if (!profile) return;\r\n\r\n    const audioElement = audioRef.current;\r\n    if (!audioElement) return;\r\n\r\n    const handleAudioError = () => {\r\n      console.error('Stream error, attempting to reload the stream...');\r\n      setErrorMessage('Stream error, attempting to reload...');\r\n    };\r\n\r\n    const handleOnline = () => {\r\n      console.log('Internet connection restored, refreshing the page...');\r\n      setIsOnline(true);\r\n      window.location.reload(true);\r\n    };\r\n\r\n    const handleOffline = () => {\r\n      console.log('Internet connection lost.');\r\n      setIsOnline(false);\r\n      setErrorMessage('No internet connection.');\r\n    };\r\n\r\n    audioElement.addEventListener('error', handleAudioError);\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    audioElement.muted = false;\r\n    setIsMuted(false);\r\n\r\n    return () => {\r\n      audioElement.removeEventListener('error', handleAudioError);\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, [profile]);\r\n\r\n  const fetchRadioProfile = async () => {\r\n    try {\r\n      const response = await axios.get(`/radiostreams/${id}`);\r\n      setProfile(response.data);\r\n    } catch (error) {\r\n      console.error('There was an error fetching the radio profile!', error);\r\n      setErrorMessage('Error fetching radio profile.');\r\n    }\r\n  };\r\n\r\n  const fetchTracks = async () => {\r\n    try {\r\n      const response = await axios.get(`/radio/${id}/tracks`);\r\n      setTracks(response.data);\r\n    } catch (error) {\r\n      console.error('There was an error fetching the tracks!', error);\r\n      setErrorMessage('Error fetching tracks.');\r\n    }\r\n  };\r\n\r\n  const fetchSchedule = async () => {\r\n    try {\r\n      const response = await axios.get(`/radio/${id}/schedule`);\r\n      setSchedule(response.data);\r\n    } catch (error) {\r\n      console.error('There was an error fetching the schedule!', error);\r\n      setErrorMessage('Error fetching schedule.');\r\n    }\r\n  };\r\n\r\n  const handlePlay = () => {\r\n    if (!profile || profile.blocked) return;\r\n\r\n    const audioElement = audioRef.current;\r\n    setIsLoading(true);\r\n    audioElement.src = profile.url;\r\n    audioElement.load();\r\n    audioElement.play().then(() => {\r\n      setIsLoading(false);\r\n    }).catch(error => {\r\n      console.error('Error attempting to play the stream:', error);\r\n      setErrorMessage('Error attempting to play the stream.');\r\n      setIsLoading(false);\r\n    });\r\n  };\r\n\r\n  const handleUserInteraction = () => {\r\n    setUserInteracted(true);\r\n    handlePlay();\r\n  };\r\n\r\n  const handleMute = () => {\r\n    if (!audioRef.current) return;\r\n    audioRef.current.muted = !audioRef.current.muted;\r\n    setIsMuted(!isMuted);\r\n  };\r\n\r\n  const handleVolumeChange = (event) => {\r\n    const newVolume = event.target.value;\r\n    if (!audioRef.current) return;\r\n    audioRef.current.volume = newVolume;\r\n    setVolume(newVolume);\r\n  };\r\n\r\n  const playScheduledTrack = (track) => {\r\n    if (!profile || profile.alarmBlocked || !audioRef.current || !trackRef.current) return;\r\n\r\n    fadeOut(audioRef.current, () => {\r\n      trackRef.current.src = `/uploads/tracks/${track}`;\r\n      console.log('Track source set to:', trackRef.current.src);\r\n      trackRef.current.load();\r\n      trackRef.current.oncanplaythrough = () => {\r\n        trackRef.current.play().catch(error => {\r\n          console.error('Error playing track:', error);\r\n        });\r\n      };\r\n      trackRef.current.onended = () => {\r\n        fadeIn(audioRef.current);\r\n        audioRef.current.play();\r\n      };\r\n    });\r\n  };\r\n\r\n  const fadeOut = (audio, callback) => {\r\n    let volume = 1.0;\r\n    const fadeAudio = setInterval(() => {\r\n      if (volume > 0.1) {\r\n        volume -= 0.1;\r\n        audio.volume = volume;\r\n      } else {\r\n        clearInterval(fadeAudio);\r\n        audio.volume = 0;\r\n        callback();\r\n      }\r\n    }, 200);\r\n  };\r\n\r\n  const fadeIn = (audio) => {\r\n    let volume = 0;\r\n    const fadeAudio = setInterval(() => {\r\n      if (volume < 0.9) {\r\n        volume += 0.1;\r\n        audio.volume = volume;\r\n      } else {\r\n        clearInterval(fadeAudio);\r\n        audio.volume = 1.0;\r\n      }\r\n    }, 200);\r\n  };\r\n\r\n  const handleAddTrack = () => {\r\n    const newSchedule = { track: newTrack, time: newTime };\r\n    const updatedSchedule = [...schedule, newSchedule];\r\n    setSchedule(updatedSchedule);\r\n    axios.post(`/radio/${id}/schedule`, updatedSchedule)\r\n      .then(response => {\r\n        console.log('Schedule saved to server');\r\n      })\r\n      .catch(error => {\r\n        console.error('Error saving schedule to server', error);\r\n      });\r\n    setNewTrack('');\r\n    setNewTime('');\r\n  };\r\n\r\n  const getDaysLeft = (expirationDate, createdDate, subscriptionPlan) => {\r\n    const now = new Date();\r\n    const created = new Date(createdDate);\r\n    const expiration = new Date(expirationDate);\r\n\r\n    let subscriptionDays = 0;\r\n    switch (subscriptionPlan) {\r\n      case '1 Day':\r\n        subscriptionDays = 1;\r\n        break;\r\n      case '1 Month':\r\n        subscriptionDays = 30;\r\n        break;\r\n      case '3 Months':\r\n        subscriptionDays = 90;\r\n        break;\r\n      case '6 Months':\r\n        subscriptionDays = 180;\r\n        break;\r\n      case '1 Year':\r\n        subscriptionDays = 365;\r\n        break;\r\n      default:\r\n        subscriptionDays = 0;\r\n    }\r\n\r\n    const hoursPassed = differenceInHours(now, created);\r\n    const daysPassed = Math.ceil(hoursPassed / 24);\r\n    const daysLeft = subscriptionDays - daysPassed;\r\n\r\n    console.log(`Current Date: ${now}`);\r\n    console.log(`Created Date: ${created}`);\r\n    console.log(`Expiration Date: ${expiration}`);\r\n    console.log(`Hours Passed: ${hoursPassed}`);\r\n    console.log(`Days Passed (ceil): ${daysPassed}`);\r\n    console.log(`Subscription Days: ${subscriptionDays}`);\r\n    console.log(`Days Left: ${daysLeft}`);\r\n\r\n    return daysLeft;\r\n  };\r\n\r\n  const isNextToPlay = (scheduledTime) => {\r\n    const now = new Date();\r\n    const scheduledDate = new Date();\r\n    const [hours, minutes, seconds] = scheduledTime.split(':').map(Number);\r\n    scheduledDate.setHours(hours, minutes, seconds);\r\n    const differenceInMinutes = (scheduledDate - now) / 60000;\r\n    return differenceInMinutes >= 0 && differenceInMinutes <= 1;\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    navigate('/login');\r\n  };\r\n\r\n  if (!profile) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  if (profile.blocked) {\r\n    return (\r\n      <div className=\"container vh-100 d-flex flex-column align-items-center justify-content-center\">\r\n        <style>{`\r\n          .blocked-message {\r\n            color: red;\r\n            font-weight: bold;\r\n            font-size: 24px;\r\n          }\r\n        `}</style>\r\n        <div className=\"blocked-message\">Your profile is blocked.</div>\r\n        <div>{profile.companyName}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <div className=\"d-flex flex-column vh-100\">\r\n        <div className=\"container flex-grow-1 d-flex flex-column\">\r\n          <style>{`\r\n            .radio-player {\r\n              background-color: white;\r\n              border-radius: 8px;\r\n              padding: 20px;\r\n              box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\r\n              width: 450px;\r\n            }\r\n            .radio-player h1 {\r\n              font-size: 24px;\r\n              font-weight: bold;\r\n            }\r\n            .radio-player img {\r\n              max-width: 100%;\r\n              height: auto;\r\n              padding: 10px;\r\n              box-sizing: border-box;\r\n            }\r\n            .radio-player .form-control-range {\r\n              width: 100%;\r\n            }\r\n            .radio-player .btn {\r\n              width: 100%;\r\n            }\r\n            .radio-player .profile-info h2 {\r\n              margin-top: 20px;\r\n              font-size: 18px;\r\n              font-weight: bold;\r\n            }\r\n            .radio-player .profile-info p {\r\n              font-size: 16px;\r\n            }\r\n            .radio-player .list-group-item {\r\n              margin-top: 10px;\r\n              background-color: #f8f9fa;\r\n              border: 1px solid #dee2e6;\r\n              transition: background-color 0.3s, transform 0.3s;\r\n            }\r\n            .radio-player .list-group-item:hover {\r\n              background-color: #e9ecef;\r\n              transform: scale(1.02);\r\n            }\r\n            .radio-player .list-group-item.active {\r\n              background-color: #007bff;\r\n              color: white;\r\n            }\r\n            .action-buttons {\r\n              position: absolute;\r\n              top: 10px;\r\n              right: 10px;\r\n              display: flex;\r\n              gap: 10px;\r\n            }\r\n            .header {\r\n              text-align: center;\r\n              margin-bottom: 20px;\r\n            }\r\n            .header h1 {\r\n              font-size: 3rem;\r\n              margin-top: 50px;\r\n            }\r\n            .header h2 {\r\n              font-size: 1.5rem;\r\n              margin: 0;\r\n            }\r\n            .subscription-info {\r\n              text-align: center;\r\n              font-size: 1rem;\r\n              margin-top: 10px;\r\n            }\r\n            .card {\r\n              width: 100%;\r\n              background-color: #f8f9fa;\r\n              border: 1px solid #dee2e6;\r\n              box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\r\n            }\r\n          `}</style>\r\n          <div className=\"action-buttons\">\r\n            {profile.alarmBlocked ? (\r\n              <button className=\"btn btn-primary\" disabled>Go to Profile</button>\r\n            ) : (\r\n              <Link to={`/radio/${id}/profile`}>\r\n                <button className=\"btn btn-primary\">Go to Profile</button>\r\n              </Link>\r\n            )}\r\n            <Link to={`/localplayer/${id}`}>\r\n              <button className=\"btn btn-info\">Go to Local Player</button>\r\n            </Link>\r\n            <button className=\"btn btn-secondary\" onClick={handleLogout}>Logout</button>\r\n          </div>\r\n          <div className=\"header\">\r\n            <h1>{profile.name}</h1>\r\n            <h2>{profile.companyName}</h2>\r\n            <div className=\"subscription-info\">\r\n              <p>Subscription Plan: {profile.subscriptionPlan}<br />\r\n              Days left to expire: {getDaysLeft(profile.expirationDate, profile.createdDate, profile.subscriptionPlan)}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"row flex-grow-1 align-items-start\">\r\n            <div className=\"col-md-6 d-flex justify-content-center\">\r\n              <div className=\"radio-player text-center\" onClick={handleUserInteraction}>\r\n                {profile.logo && <img src={`/uploads/${profile.logo}`} alt=\"Company Logo\" className=\"img-fluid mb-3\" />}\r\n                <audio ref={audioRef} preload=\"none\" style={{ display: 'none' }}></audio>\r\n                <audio ref={trackRef} preload=\"none\" style={{ display: 'none' }}></audio>\r\n                <div className=\"mb-3\">\r\n                  <button className=\"btn btn-danger btn-block mb-2\" onClick={handlePlay}>Live</button>\r\n                  <button className=\"btn btn-danger btn-block mb-2\" onClick={handleMute}>{isMuted ? 'Unmute' : 'Mute'}</button>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                  <input\r\n                    type=\"range\"\r\n                    className=\"form-control-range\"\r\n                    min=\"0\"\r\n                    max=\"1\"\r\n                    step=\"0.01\"\r\n                    value={volume}\r\n                    onChange={handleVolumeChange}\r\n                  />\r\n                </div>\r\n                {isLoading && <p>Connecting...</p>}\r\n                {!isOnline && <p>No connection.</p>}\r\n                {errorMessage && <p>{errorMessage}</p>}\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-6 d-flex justify-content-center\">\r\n              {profile.alarmBlocked ? (\r\n                <div className=\"card text-center p-4\">\r\n                  <div className=\"card-header\">\r\n                    <h2>Alarm System is blocked</h2>\r\n                  </div>\r\n                  <p style={{ color: 'red', fontWeight: 'bold' }}>The alarm system for this profile is currently blocked.</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"card text-center p-4\">\r\n                  <div className=\"card-header\">\r\n                    <h2>Scheduled Tracks</h2>\r\n                  </div>\r\n                  <ul className=\"list-group list-group-flush\">\r\n                    {schedule.map((item, index) => (\r\n                      <li key={index} className=\"list-group-item d-flex justify-content-between align-items-center\" style={isNextToPlay(item.time) ? { fontWeight: 'bold', backgroundColor: '#ffecb3' } : {}}>\r\n                        <span className=\"dot\" style={{ height: '10px', width: '10px', backgroundColor: '#ff0000', borderRadius: '50%', display: 'inline-block', marginRight: '10px' }}></span>\r\n                        {item.time} - {item.track.split('-').slice(1).join('-')}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <br />\r\n        <Footer />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RadioPlayer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}