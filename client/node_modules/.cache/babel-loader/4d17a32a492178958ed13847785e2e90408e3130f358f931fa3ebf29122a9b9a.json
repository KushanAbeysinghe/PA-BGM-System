{"ast":null,"code":"import _defineProperty from\"C:/Users/kusha/Desktop/Radio Alarm System - Copy/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/kusha/Desktop/Radio Alarm System - Copy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/kusha/Desktop/Radio Alarm System - Copy/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import Header from'./Header';import Footer from'./Footer';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var History=function History(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),history=_useState2[0],setHistory=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),expandedStreamIds=_useState4[0],setExpandedStreamIds=_useState4[1];useEffect(function(){fetchHistory();},[]);var fetchHistory=function fetchHistory(){axios.get('/history').then(function(response){setHistory(response.data);}).catch(function(error){console.error('There was an error fetching the history!',error);});};var groupHistoryById=function groupHistoryById(history){return history.reduce(function(acc,item){if(!acc[item.id]){acc[item.id]={details:[],companyName:item.companyName,name:item.name};}acc[item.id].details.push(item);return acc;},{});};var toggleExpand=function toggleExpand(streamId){setExpandedStreamIds(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},streamId,!prev[streamId]));});};var groupedHistory=groupHistoryById(history);return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column min-vh-100\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4 flex-grow-1\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-primary mb-4\",children:\"History\"}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"btn btn-primary mb-4\",children:\"Go to Dashboard\"}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n          .card {\\n            border: none;\\n            border-radius: 8px;\\n            margin-bottom: 20px;\\n            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\\n            font-family: 'Roboto', sans-serif;\\n            background: linear-gradient(135deg, #f3f4f6, #f9fafb);\\n          }\\n          .card-header {\\n            background-color: #007bff;\\n            color: #ffffff;\\n            border-radius: 8px 8px 0 0;\\n            padding: 10px;\\n            cursor: pointer;\\n          }\\n          .card-body {\\n            padding: 10px;\\n          }\\n          .card-title {\\n            margin-bottom: 0;\\n          }\\n          .list-group-item {\\n            background-color: #ffffff;\\n            border: 1px solid #dee2e6;\\n            border-radius: 8px;\\n            margin-bottom: 10px;\\n            padding: 10px;\\n          }\\n          .text-secondary {\\n            color: #6c757d !important;\\n          }\\n        \"}),Object.keys(groupedHistory).map(function(streamId){var _groupedHistory$strea=groupedHistory[streamId],companyName=_groupedHistory$strea.companyName,name=_groupedHistory$strea.name,details=_groupedHistory$strea.details;var sortedDetails=details.sort(function(a,b){return new Date(b.timestamp)-new Date(a.timestamp);});return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",onClick:function onClick(){return toggleExpand(streamId);},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:\"Stream ID: \".concat(streamId)}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Company Name: \".concat(companyName),/*#__PURE__*/_jsx(\"br\",{}),\"Name: \".concat(name)]})]}),expandedStreamIds[streamId]&&/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:sortedDetails.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Action:\"}),\" \",item.action]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Timestamp:\"}),\" \",new Date(item.timestamp).toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Details:\"}),\" \",item.details]})]},index);})})]},streamId);})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default History;","map":{"version":3,"names":["React","useState","useEffect","axios","Header","Footer","Link","jsx","_jsx","jsxs","_jsxs","History","_useState","_useState2","_slicedToArray","history","setHistory","_useState3","_useState4","expandedStreamIds","setExpandedStreamIds","fetchHistory","get","then","response","data","catch","error","console","groupHistoryById","reduce","acc","item","id","details","companyName","name","push","toggleExpand","streamId","prev","_objectSpread","_defineProperty","groupedHistory","className","children","to","Object","keys","map","_groupedHistory$strea","sortedDetails","sort","a","b","Date","timestamp","onClick","concat","index","action","toLocaleString"],"sources":["C:/Users/kusha/Desktop/Radio Alarm System - Copy/client/src/components/History.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst History = () => {\r\n  const [history, setHistory] = useState([]);\r\n  const [expandedStreamIds, setExpandedStreamIds] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetchHistory();\r\n  }, []);\r\n\r\n  const fetchHistory = () => {\r\n    axios.get('/history')\r\n      .then(response => {\r\n        setHistory(response.data);\r\n      })\r\n      .catch(error => {\r\n        console.error('There was an error fetching the history!', error);\r\n      });\r\n  };\r\n\r\n  const groupHistoryById = (history) => {\r\n    return history.reduce((acc, item) => {\r\n      if (!acc[item.id]) {\r\n        acc[item.id] = { details: [], companyName: item.companyName, name: item.name };\r\n      }\r\n      acc[item.id].details.push(item);\r\n      return acc;\r\n    }, {});\r\n  };\r\n\r\n  const toggleExpand = (streamId) => {\r\n    setExpandedStreamIds((prev) => ({ ...prev, [streamId]: !prev[streamId] }));\r\n  };\r\n\r\n  const groupedHistory = groupHistoryById(history);\r\n\r\n  return (\r\n    <div className=\"d-flex flex-column min-vh-100\">\r\n      <Header />\r\n      <div className=\"container mt-4 flex-grow-1\">\r\n        <h2 className=\"text-primary mb-4\">History</h2>\r\n        <Link to=\"/dashboard\" className=\"btn btn-primary mb-4\">Go to Dashboard</Link>\r\n        <style jsx>{`\r\n          .card {\r\n            border: none;\r\n            border-radius: 8px;\r\n            margin-bottom: 20px;\r\n            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\r\n            font-family: 'Roboto', sans-serif;\r\n            background: linear-gradient(135deg, #f3f4f6, #f9fafb);\r\n          }\r\n          .card-header {\r\n            background-color: #007bff;\r\n            color: #ffffff;\r\n            border-radius: 8px 8px 0 0;\r\n            padding: 10px;\r\n            cursor: pointer;\r\n          }\r\n          .card-body {\r\n            padding: 10px;\r\n          }\r\n          .card-title {\r\n            margin-bottom: 0;\r\n          }\r\n          .list-group-item {\r\n            background-color: #ffffff;\r\n            border: 1px solid #dee2e6;\r\n            border-radius: 8px;\r\n            margin-bottom: 10px;\r\n            padding: 10px;\r\n          }\r\n          .text-secondary {\r\n            color: #6c757d !important;\r\n          }\r\n        `}</style>\r\n        {Object.keys(groupedHistory).map(streamId => {\r\n          const { companyName, name, details } = groupedHistory[streamId];\r\n          const sortedDetails = details.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));\r\n\r\n          return (\r\n            <div key={streamId} className=\"card\">\r\n              <div className=\"card-header\" onClick={() => toggleExpand(streamId)}>\r\n                <h5 className=\"card-title\">{`Stream ID: ${streamId}`}</h5>\r\n                <p>{`Company Name: ${companyName}`}<br></br>\r\n                  {`Name: ${name}`}</p>\r\n              </div>\r\n              {expandedStreamIds[streamId] && (\r\n                <div className=\"card-body\">\r\n                  {sortedDetails.map((item, index) => (\r\n                    <div key={index} className=\"list-group-item\">\r\n                      <p><strong>Action:</strong> {item.action}</p>\r\n                      <p><strong>Timestamp:</strong> {new Date(item.timestamp).toLocaleString()}</p>\r\n                      <p><strong>Details:</strong> {item.details}</p>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}